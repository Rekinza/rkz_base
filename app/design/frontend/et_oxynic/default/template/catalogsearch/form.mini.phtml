<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2006-2014 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/* @var $this Mage_Core_Block_Template */
/* @var $catalogSearchHelper Mage_Catalogsearch_Helper_Data */
$catalogSearchHelper =  $this->helper('catalogsearch');
?>
<!--script src="js/modernizr.custom.js"></script-->

<!--form id="search_mini_form" action="<?php echo $catalogSearchHelper->getResultUrl() ?>" method="get">
    <div class="form-search">
        <label for="search"><?php echo $this->__('Search:') ?></label>
        <input id="search" type="text" name="<?php echo $catalogSearchHelper->getQueryParamName() ?>" value="<?php echo $catalogSearchHelper->getEscapedQueryText() ?>" class="input-text searchbar" maxlength="<?php echo $catalogSearchHelper->getMaxQueryLength();?>" />
        <button type="submit" title="<?php echo $this->__('Search') ?>" class="button fa fa-search"><span class="glyphicon glyphicon-search"><span><?php echo $this->__('Search') ?></span></span></button>
        <div id="search_autocomplete" class="search-autocomplete"></div>
        <script type="text/javascript">
        //<![CDATA[
            var searchForm = new Varien.searchForm('search_mini_form', 'search', '<?php echo $this->__('Search...') ?>');
            searchForm.initAutocomplete('<?php echo $catalogSearchHelper->getSuggestUrl() ?>', 'search_autocomplete');
        //]]>

            // script for event tracking from search bar
            jQuery(".searchbar").unbind().click(function() {
            console.log("searched");
            ga('send', 'event', 'search-bar', 'click',{'nonInteraction': 1}); 

            });

        //]]>
        </script>
    </div> 



</form-->

<div id="sb-search" class="sb-search form-search">
    <form id="search_mini_form" action="<?php echo $catalogSearchHelper->getResultUrl() ?>" method="get">
        <input class="sb-search-input" placeholder="Search..." type="search" value="<?php echo $catalogSearchHelper->getEscapedQueryText() ?>" class="input-text searchbar" maxlength="<?php echo $catalogSearchHelper->getMaxQueryLength();?>" name="<?php echo $catalogSearchHelper->getQueryParamName() ?>" id="search"></input>
        <input class="sb-search-submit" type="submit" value="">
            <span class="sb-icon-search"></span>
        </input>  
    </form>
</div>
<div id="search_autocomplete" class="search-autocomplete"></div>
        <script type="text/javascript">
        //<![CDATA[
            var searchForm = new Varien.searchForm('search_mini_form', 'search', '<?php echo $this->__('Search...') ?>');
            searchForm.initAutocomplete('<?php echo $catalogSearchHelper->getSuggestUrl() ?>', 'search_autocomplete');
        //]]>

            // script for event tracking from search bar
            jQuery(".sb-search-input").unbind().click(function() {
            console.log("searched");
            ga('send', 'event', 'search-bar', 'click',{'nonInteraction': 1}); 

            });

        //]]>
</script>

<!--script src="js/classie.js"></script>
<script src="js/uisearch.js"></script-->
<script>

    new UISearch( document.getElementById('sb-search') );
</script>
